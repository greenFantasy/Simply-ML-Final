{"ast":null,"code":"import ols from './ols';\nimport { visitPoints } from './points';\nimport rSquared from './r-squared'; // Adapted from d3-regression by Harry Stevens\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nexport default function (data, x, y) {\n  let X = 0,\n      Y = 0,\n      XY = 0,\n      X2 = 0,\n      YS = 0,\n      n = 0;\n  visitPoints(data, x, y, (dx, dy) => {\n    const lx = Math.log(dx),\n          ly = Math.log(dy);\n    X += lx;\n    Y += ly;\n    XY += lx * ly;\n    X2 += lx * lx;\n    YS += dy;\n    ++n;\n  });\n\n  const coef = ols(X / n, Y / n, XY / n, X2 / n),\n        predict = x => coef[0] * Math.pow(x, coef[1]);\n\n  coef[0] = Math.exp(coef[0]);\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, YS / n, predict)\n  };\n}","map":null,"metadata":{},"sourceType":"module"}