{"ast":null,"code":"import ols from './ols';\nimport { visitPoints } from './points';\nimport rSquared from './r-squared'; // Adapted from d3-regression by Harry Stevens\n// License: https://github.com/HarryStevens/d3-regression/blob/master/LICENSE\n\nexport default function (data, x, y) {\n  let X = 0,\n      Y = 0,\n      XY = 0,\n      X2 = 0,\n      n = 0;\n  visitPoints(data, x, y, (dx, dy) => {\n    dx = Math.log(dx);\n    X += dx;\n    Y += dy;\n    XY += dx * dy;\n    X2 += dx * dx;\n    ++n;\n  });\n\n  const coef = ols(X / n, Y / n, XY / n, X2 / n),\n        predict = x => coef[0] + coef[1] * Math.log(x);\n\n  return {\n    coef: coef,\n    predict: predict,\n    rSquared: rSquared(data, x, y, Y / n, predict)\n  };\n}","map":null,"metadata":{},"sourceType":"module"}